# Pipeline to create a new version of the SAML Flask container and
# push it to DockerHub

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

variables:
  - group: Docker
  - name: dockerId
    value: emcconne
  - name: imageName
    value: saml-flask

steps:
- script: |
    echo "dockerId=$(dockerId)"
    echo "imageName=$(imageName)"
    echo "Docker password=$(docker_pass)"
    echo "Docker username=$(docker_user)"
- script: |
    docker build -t $(dockerId)/$(imageName) .
    docker login -u $(dockerId) -p $(pswd)
    docker push $(dockerId)/$(imageName)
  env:
    pswd: $(docker_pass)   